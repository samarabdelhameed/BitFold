# ุญู ูุดููุฉ ุงูุชูุซูู - ุฎุทุฃ 403 Forbidden

## ุงููุดููุฉ
ุนูุฏ ูุญุงููุฉ ุฅูุฏุงุน UTXOุ ูุธูุฑ ุฎุทุฃ:
```
403 Forbidden - Invalid delegation: Invalid canister signature
```

## ุงูุณุจุจ
ุงูุชุทุจูู ูุงู ูุณุชุฎุฏู **Internet Identity ูู ุงูุดุจูุฉ ุงูุฑุฆูุณูุฉ** ูุน **ุงูุฑูุจูููุง ุงููุญููุฉ**ุ ููุง ูุณุจุจ ูุดู ุงูุชุญูู ูู ุงูุชูููุนุงุช.

## ุงูุญู โ

ุชู ุฅุตูุงุญ ุงููุดููุฉ ุจุงููุงูู! ุงูุขู ุงูุชุทุจูู ูุณุชุฎุฏู Internet Identity ูุญูู.

### ุงูุฎุทูุงุช ุงููุทููุจุฉ ููู:

#### ุงูุทุฑููุฉ ุงูุฃููู: ุงุณุชุฎุฏุงู ุฒุฑ ุงููุณุญ (ุงูุฃุณูู) ๐ฏ

1. **ุงูุชุญ ุงูุชุทุจูู**
   ```
   http://127.0.0.1:4943/?canisterId=br5f7-7uaaa-aaaaa-qaaca-cai
   ```

2. **ุงุถุบุท ุนูู ุฒุฑ "Clear Auth Data"**
   - ูู ุตูุญุฉ Connect Wallet
   - ุงูุฒู ููุณู Internet Identity
   - ุงุถุบุท ุนูู ุงูุฒุฑ ุงูุฃุตูุฑ: "๐งน Clear Auth Data (Fix Connection Issues)"
   - ูุงูู ุนูู ุงูุฑุณุงูุฉ
   - ุงูุตูุญุฉ ุณุชูุญุฏูุซ ุชููุงุฆูุงู

3. **ุงุชุตู ุจู Internet Identity**
   - ุงุถุบุท "Connect Internet Identity"
   - ุณูุชู ุชูุฌููู ุฅูู II ุงููุญูู: `http://bw4dl-smaaa-aaaaa-qaacq-cai.localhost:4943`
   - ุฃูุดุฆ anchor ุฌุฏูุฏ (ุฃูู ูุฑุฉ) ุฃู ุงุณุชุฎุฏู ุงูููุฌูุฏ
   - ุตุงุฏู ูุงุฑุฌุน ููุชุทุจูู

4. **ุฌุฑุจ ุงูุฅูุฏุงุน ูุฑุฉ ุฃุฎุฑู**
   - ูุฌุจ ุฃู ูุนูู ุจุฏูู ุฃุฎุทุงุก 403 โ

#### ุงูุทุฑููุฉ ุงูุซุงููุฉ: ูุณุญ ุงููุงุด ูุฏููุงู

1. **ุงูุณุญ ุงููุงุด ูุงูู Local Storage**
   - ุงูุชุญ DevTools (F12)
   - Application โ Storage โ Clear site data
   - ุฃู ุงุณุชุฎุฏู ูุถุน ุงูุชุตูุญ ุงูุฎูู

2. **ุญุฏูุซ ุงูุตูุญุฉ**
   ```
   http://127.0.0.1:4943/?canisterId=br5f7-7uaaa-aaaaa-qaaca-cai
   ```

3. **ุงุชุจุน ุงูุฎุทูุงุช 3-4 ูู ุงูุทุฑููุฉ ุงูุฃููู**

## ูุง ุชู ุชุบููุฑู ูู ุงูููุฏ:

### 1. ุฅุถุงูุฉ Internet Identity ูุญูู
```json
// dfx.json
"internet_identity": {
  "type": "custom",
  "candid": "...",
  "wasm": "..."
}
```

### 2. ูุดุฑ II ูุญูู
```bash
dfx deploy internet_identity
# Canister ID: bw4dl-smaaa-aaaaa-qaacq-cai
```

### 3. ุชุญุฏูุซ ุงููุฑููุช ุฅูุฏ
- ุชุบููุฑ `icpAgent.ts` ูุงุณุชุฎุฏุงู II ุงููุญูู
- ุฅุถุงูุฉ ุฏุงูุฉ `clearAuth()` ููุณุญ ุงูุจูุงูุงุช ุงููุฏููุฉ
- ุฅุถุงูุฉ ุฒุฑ ูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ููุณุญ ุงูุจูุงูุงุช

### 4. ุฅุนุงุฏุฉ ุจูุงุก ููุดุฑ ุงููุฑููุช ุฅูุฏ
```bash
cd frontend && npm run build
dfx deploy frontend
```

## ูุนูููุงุช ูููุฉ

### Canister IDs:
- **Internet Identity**: `bw4dl-smaaa-aaaaa-qaacq-cai`
- **Vault**: `bkyz2-fmaaa-aaaaa-qaaaq-cai`
- **Frontend**: `br5f7-7uaaa-aaaaa-qaaca-cai`

### URLs:
- **Frontend**: http://127.0.0.1:4943/?canisterId=br5f7-7uaaa-aaaaa-qaaca-cai
- **Internet Identity**: http://bw4dl-smaaa-aaaaa-qaacq-cai.localhost:4943

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ:

1. **ุงูุณุญ ุจูุงูุงุช ุงููุชุตูุญ ุจุงููุงูู** (ุงูุทุฑููุฉ ุงูุซุงููุฉ ุฃุนูุงู)
2. **ุฃุนุฏ ุชุดุบูู dfx**:
   ```bash
   dfx stop
   dfx start --clean --background
   ```
3. **ุฃุนุฏ ูุดุฑ ุฌููุน ุงููุงููุณุชุฑุฒ**:
   ```bash
   dfx deploy
   ```
4. **ุชุญูู ูู ุฃู II ูุนูู**:
   - ุฒุฑ: http://bw4dl-smaaa-aaaaa-qaacq-cai.localhost:4943
   - ูุฌุจ ุฃู ุชุธูุฑ ูุงุฌูุฉ Internet Identity

## ููุงุญุธุงุช

- โ **ููุชุทููุฑ ุงููุญูู**: ูุณุชุฎุฏู II ุงููุญูู (`bw4dl-smaaa-aaaaa-qaacq-cai`)
- โ **ููุฅูุชุงุฌ**: ุณูุณุชุฎุฏู II ุงูุฑุฆูุณู (`https://identity.ic0.app`)
- โ๏ธ **ููู**: ุงูุณุญ ุจูุงูุงุช ุงููุชุตูุญ ุนูุฏ ุงูุชุจุฏูู ุจูู ุงููุญูู ูุงูุฑุฆูุณู

## ุฅุตูุงุญุงุช ุฅุถุงููุฉ ุชูุช

### 2. ุชุนุทูู ุงูุชุญูู ูู Bitcoin API ููุชุทููุฑ ุงููุญูู

**ุงููุดููุฉ ุงูุซุงููุฉ**: 
```
Bitcoin API call failed: (DestinationInvalid, "Canister g4xu7-jiaaa-aaaan-aaaaq-cai not found")
```

**ุงูุณุจุจ**: Bitcoin API canister ููุฌูุฏ ููุท ุนูู ุงูุดุจูุฉ ุงูุฑุฆูุณูุฉ/ุงูุชุฌุฑูุจูุฉุ ูููุณ ุนูู ุงูุฑูุจูููุง ุงููุญููุฉ.

**ุงูุญู**: ุชู ุชูุนูู `SKIP_BITCOIN_VERIFICATION = true` ูู `canisters/vault/src/bitcoin.rs` ููุชุทููุฑ ุงููุญูู.

```rust
// ูู bitcoin.rs
const SKIP_BITCOIN_VERIFICATION: bool = true; // ููุชุทููุฑ ุงููุญูู ููุท
```

โ๏ธ **ููู**: ูุฐุง ููุชุทููุฑ ุงููุญูู ููุท! ุนูุฏ ุงููุดุฑ ุนูู ุงูุดุจูุฉ ุงูุชุฌุฑูุจูุฉ ุฃู ุงูุฑุฆูุณูุฉุ ูุฌุจ ุชุบููุฑู ุฅูู `false`.

## ุงููุชูุฌุฉ ุงููุชููุนุฉ

ุจุนุฏ ุงุชุจุงุน ุงูุฎุทูุงุช:
- โ ุงูุงุชุตุงู ุจู Internet Identity ูุนูู
- โ ุฅูุฏุงุน UTXO ูุนูู ุจุฏูู ุฃุฎุทุงุก 403
- โ ุงูุชุญูู ูู Bitcoin UTXO ูุชู ุชุฎุทูู ูู ุงูุจูุฆุฉ ุงููุญููุฉ
- โ ููู ุงูุถูุงู ูุฅูุดุงุก ุนุฑูุถ ุงููุฑูุถ ูุนูู
- โ ุฌููุน ุงูุนูููุงุช ุงููุตุงุฏู ุนูููุง ุชุนูู ุจุดูู ุตุญูุญ

## ููุงุญุธุงุช ูููุฉ ูููุดุฑ ุนูู Testnet

ุนูุฏ ุงููุดุฑ ุนูู ุงูุดุจูุฉ ุงูุชุฌุฑูุจูุฉ:

1. **ุชุนุทูู ุชุฎุทู ุงูุชุญูู ูู Bitcoin**:
   ```rust
   // ูู canisters/vault/src/bitcoin.rs
   const SKIP_BITCOIN_VERIFICATION: bool = false; // ููุฅูุชุงุฌ
   ```

2. **ุงุณุชุฎุฏุงู Internet Identity ุงูุฑุฆูุณู**:
   - ุณูุชู ุชููุงุฆูุงู ุนูุฏ ุชุนููู `VITE_DFX_NETWORK=ic`

3. **ุฅุถุงูุฉ Cycles ููู Canister**:
   - Bitcoin API ูุชุทูุจ 4 ูููุงุฑ cycles ููู ุงุณุชุฏุนุงุก
   - ุชุฃูุฏ ูู ูุฌูุฏ cycles ูุงููุฉ ูู ุงูู vault canister

---

**ุชู ุงูุฅุตูุงุญ ุจูุฌุงุญ! ๐**

ุงูุขู ููููู:
1. ุงุณุชุฎุฏุงู ุฒุฑ "Clear Auth Data" ููุณุญ ุงูุจูุงูุงุช ุงููุฏููุฉ
2. ุงูุงุชุตุงู ุจู Internet Identity ุงููุญูู
3. ุฅูุฏุงุน ูููู UTXOs ุจุฏูู ุฃุฎุทุงุก
